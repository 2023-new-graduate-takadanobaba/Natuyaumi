<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">
<head>
<link rel="stylesheet" th:href="@{/css/genre.css}">

<meta charset="UTF-8">
<title>Genre</title>
<script src="https://code.jquery.com/jquery-3.7.0.js"
	integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
	crossorigin="anonymous"></script>
<script th:src="@{Js/genre.js}" type="text/javascript"></script>
</head>
<body>

	<header class="header">
		<img class="img-header"
			src="https://d1d37e9z843vy6.cloudfront.net/jp/images/3980978/8647f2c7da12adbe101a42764d34dd7440c947cb.jpeg"
			alt="sea">
		<div class="overlay"></div>
		<h1><a th:href="@{/returnTop}">今日はどこに行こう？</a></h1>
</header>
	<div class="wrapper">
	
		<a th:href="@{/returnTop}">戻る</a>

	
		<div th:each="article: ${articles}">
		<div class="article">
		<img class="genre-img"   th:src="${article.imageUrl}" />
		
		<div class="article-text">
			<a th:href="@{/doDisplayAirticle/{id}(id=${article.id})}"
				th:text="${article.name}"></a><br/>
			<p>所在地：<span th:text="${article.address}"></span></p>
			<div>穴場度：
					<span th:switch="${article.level}">
						<span th:case ="1">★</span>
						<span th:case ="2">★★</span>
						<span th:case ="3">★★★</span>
						<span th:case ="4">★★★★</span>
						<span th:case ="5">★★★★★</span>
		 			</span>
		 	
		 	</div>
<!-- 		 	<p th:text="${article.genre.genreName}"> -->
			<p class ="genre-title"th:text="${article.title}"></p>
		</div>
		
			
		</div>
		</div>


	</div>
	<div  id="topbutton"><a href="#top">^</a><br>
	<a href="#top">^</a><br>
	</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
//     $(function(){
//       load_effect();
//       $(window).scroll(function (){
//           scroll_effect();
//       });
//     });

//     //ふわっとロード
//     function load_effect(){
//       var tt = $(window).scrollTop();
//       var hh = $(window).height();
//       var delay = 0; // アニメーションの遅延時間
//       $('.article').each(function(index) {
//         var $this = $(this);
//         var yy = $this.offset().top;
//         if (tt > yy - hh) {
//           setTimeout(function() {
//             $this.addClass('done');
//           }, delay);
//           delay += 300; // 200ミリ秒ごとに次の要素を表示させる（適宜調整可能）
//         }
//       });
//     }

$(function() {
  load_effect();
  $(window).scroll(function() {
    load_effect(); // スクロール時にも load_effect() を呼び出す
  });
});

// ふわっとロード
function load_effect() {
  var tt = $(window).scrollTop();
  var hh = $(window).height();
  var delay = 0; // アニメーションの遅延時間
  $('.article').each(function(index) {
    var $this = $(this);
    var yy = $this.offset().top;
    if (tt + hh > yy) { // スクロール位置とウィンドウの高さを考慮して判定する
      if (!$this.hasClass('done')) { // すでに表示済みの要素はスキップする
        setTimeout(function() {
          $this.addClass('done');
        }, delay);
        delay += 100; // 200ミリ秒ごとに次の要素を表示させる（適宜調整可能）
      }
    }
  });
}

$(function() {
	   // スクロールしたときに実行
	   $(window).scroll(function () {
	      // 目的のスクロール量を設定(px)
	      var TargetPos = 350;
	      // 現在のスクロール位置を取得
	      var ScrollPos = $(window).scrollTop();
	      // 現在位置が目的のスクロール量に達しているかどうかを判断
	      if( ScrollPos >= TargetPos) {
	         // 達していれば表示
	         $("#topbutton").fadeIn();
	      }
	      else {
	         // 達していなければ非表示
	         $("#topbutton").fadeOut();
	      }
	   });
	});
  </script>
  

</body>
</html>